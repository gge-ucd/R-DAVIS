<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Starting With Data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="stylesheet" href="site_libs_extra/academicons-1.8.0/css/academicons.css"/>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info-circle  fa-1x"></span>
     
    About
  </a>
</li>
<li>
  <a href="syllabus.html">
    <span class="fa fa-map fa-1x"></span>
     
    Syllabus
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Set Up!
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="computer_setup.html">Computer Setup</a>
    </li>
    <li>
      <a href="setting_up_git.html">Setting up Git Repository</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book  fa-1x"></span>
     
    Course Materials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lesson_intro_r_rstudio.html">Intro to Programming, R, &amp; RStudio</a>
    </li>
    <li>
      <a href="lesson_spreadsheets_condensed.html">Spreadsheets</a>
    </li>
    <li>
      <a href="lesson_project_management.html">Project Management</a>
    </li>
    <li>
      <a href="lesson_how_r_thinks_about_data.html">How R Thinks About Data</a>
    </li>
    <li>
      <a href="lesson_data_frames_tibbles_ecology.html">Starting With Data in R</a>
    </li>
    <li>
      <a href="lesson_dplyr_ecology.html">Using dplyr and tidyr</a>
    </li>
    <li>
      <a href="lesson_ggplot_ecology.html">Using ggplot2</a>
    </li>
    <li>
      <a href="lesson_visualization_dos.html">Visualization Best Practices</a>
    </li>
    <li>
      <a href="lesson_data_import.html">Data Import &amp; Export</a>
    </li>
    <li>
      <a href="lesson_lubridate.html">Date-times with lubridate</a>
    </li>
    <li>
      <a href="lesson_functions.html">Writing functions</a>
    </li>
    <li>
      <a href="lesson_iteration.html">Iteration</a>
    </li>
    <li>
      <a href="lesson_rmarkdown.html">Literate Programming with RMarkdown</a>
    </li>
  </ul>
</li>
<li>
  <a href="lectures.html">
    <span class="fa fa-slideshare fa-1x"></span>
     
    Lectures
  </a>
</li>
<li>
  <a href="assignments.html">
    <span class="fa fa-paperclip fa-1x"></span>
     
    Assignments
  </a>
</li>
<li>
  <a href="resources.html">
    <span class="fa fa-list"></span>
     
    Resources
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fa fa-hand-spock-o"></span>
     
    Contact
  </a>
</li>
<li>
  <a href="https://github.com/gge-ucd/R-DAVIS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Starting With Data</h1>

</div>


<div class="blue">
<h3 id="learning-objectives">Learning Objectives</h3>
<ol style="list-style-type: decimal">
<li>Know how to load a package</li>
<li>Be able to describe what data frames and tibbles are</li>
<li>Know how to use <code>read.csv()</code> to read a CSV file into R</li>
<li>Be able to explore a data frame</li>
<li>Be able to use subset a data frame</li>
<li>Know the distinctions base R and <code>tidyverse</code></li>
</ol>
</div>
<p>Now that we’ve learned a bit about how R is thinking about data under the hood, using different types of vectors to build more complicated data structures, let’s actually look at some data.</p>
<div id="presentation-of-the-survey-data" class="section level2">
<h2>Presentation of the Survey Data</h2>
<p>We are studying the species repartition and weight of animals caught in plots in our study area. The dataset is stored as a comma separated value (CSV) file. Each row holds information for a single animal, and the columns represent:</p>
<table>
<thead>
<tr class="header">
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>record_id</td>
<td>Unique id for the observation</td>
</tr>
<tr class="even">
<td>month</td>
<td>month of observation</td>
</tr>
<tr class="odd">
<td>day</td>
<td>day of observation</td>
</tr>
<tr class="even">
<td>year</td>
<td>year of observation</td>
</tr>
<tr class="odd">
<td>plot_id</td>
<td>ID of a particular plot</td>
</tr>
<tr class="even">
<td>species_id</td>
<td>2-letter code</td>
</tr>
<tr class="odd">
<td>sex</td>
<td>sex of animal (“M”, “F”)</td>
</tr>
<tr class="even">
<td>hindfoot_length</td>
<td>length of the hindfoot in mm</td>
</tr>
<tr class="odd">
<td>weight</td>
<td>weight of the animal in grams</td>
</tr>
<tr class="even">
<td>genus</td>
<td>genus of animal</td>
</tr>
<tr class="odd">
<td>species</td>
<td>species of animal</td>
</tr>
<tr class="even">
<td>taxon</td>
<td>e.g. Rodent, Reptile, Bird, Rabbit</td>
</tr>
<tr class="odd">
<td>plot_type</td>
<td>type of plot</td>
</tr>
</tbody>
</table>
</div>
<div id="loading-the-data" class="section level2">
<h2>Loading the Data</h2>
<p>Your current R project should already have a <code>data</code> folder with the surveys data CSV file in it. We can read it into R and assign it to an object by using the <code>read.csv()</code> function. The first argument to <code>read.csv()</code> is the path of the file you want to read, in quotes. This path will be relative to your current <strong>working directory</strong>, which in our case is the R Project folder. So from there, we want to access the “data” folder, and then the name of the CSV file.</p>
<pre class="r"><code>surveys &lt;- read.csv(&quot;data/portal_data_joined.csv&quot;)</code></pre>
<ul>
<li>Hint: tab-completion works with file paths too. Type the pair of quotes, and with your cursor between them, hit tab to bring up the files in your working directory.</li>
</ul>
<p>Take a look at your Environment pane and you should see an object called “surveys”. We can print out the object to take a look at it by just running the name of the object. We can also check to see what class it is.</p>
<pre class="r"><code>surveys</code></pre>
<pre><code>##   record_id month day year plot_id species_id sex hindfoot_length weight   genus  species   taxa plot_type
## 1         1     7  16 1977       2         NL   M              32     NA Neotoma albigula Rodent   Control
## 2        72     8  19 1977       2         NL   M              31     NA Neotoma albigula Rodent   Control
## 3       224     9  13 1977       2         NL                  NA     NA Neotoma albigula Rodent   Control
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 34783 rows ]</code></pre>
<pre class="r"><code>class(surveys)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Wow, printing a data frame gives us quite a bit of output. This is a lot more data than the small vectors we worked with last lesson, but the basic principles remain the same.</p>
<p>Data frames are really just a collection of vectors: every column is a vector with a single data type, and every column is the exact same length. You can make a data frame “by hand”, but they’re usually created when you import some sort of tabular data into R using a function like <code>read.csv()</code>.</p>
<p><a href="img/data-frame.svg"></a></p>
</div>
<div id="inspecting-data.frame-objects" class="section level2">
<h2>Inspecting <code>data.frame</code> Objects</h2>
<p>When working with a large data frame, it’s usually impractical to try to look at it all at once, so we’ll need to arm ourselves with a series of tools for inspecting them. Here is a non-exhaustive list of some common functions to do this:</p>
<ul>
<li>Size:
<ul>
<li><code>nrow(surveys)</code> - returns the number of rows</li>
<li><code>ncol(surveys)</code> - returns the number of columns</li>
</ul></li>
<li>Content:
<ul>
<li><code>head(surveys)</code> - shows the first 6 rows</li>
<li><code>tail(surveys)</code> - shows the last 6 rows</li>
<li><code>View(surveys)</code> - opens a new tab in RStudio that shows the entire data frame. Useful at times, but you shouldn’t become overly reliant on checking data frames by eye, it’s easy to make mistakes</li>
</ul></li>
<li>Names:
<ul>
<li><code>colnames(surveys)</code> - returns the column names</li>
<li><code>rownames(surveys)</code> - returns the row names</li>
</ul></li>
<li>Summary:
<ul>
<li><code>str(surveys)</code> - structure of the object and information about the class, length and content of each column</li>
<li><code>summary(surveys)</code> - summary statistics for each column</li>
</ul></li>
</ul>
<p>Note: most of these functions are “generic”, they can be used on other types of objects besides <code>data.frame</code>.</p>
<div class="blue">
<h3 id="challenge">Challenge</h3>
<p>Based on the output of <code>str(surveys)</code>, can you answer the following questions?</p>
<ul>
<li>What is the class of the object <code>surveys</code>?<br />
</li>
<li>How many rows and how many columns are in this object?<br />
</li>
<li>How are our character data represented in this data frame?<br />
</li>
<li>How many species have been recorded during these surveys?</li>
</ul>
<details>
<p><summary>ANSWER</summary></p>
<pre class="r"><code>str(surveys)</code></pre>
<pre><code>## &#39;data.frame&#39;:    34786 obs. of  13 variables:
##  $ record_id      : int  1 72 224 266 349 363 435 506 588 661 ...
##  $ month          : int  7 8 9 10 11 11 12 1 2 3 ...
##  $ day            : int  16 19 13 16 12 12 10 8 18 11 ...
##  $ year           : int  1977 1977 1977 1977 1977 1977 1977 1978 1978 1978 ...
##  $ plot_id        : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ species_id     : chr  &quot;NL&quot; &quot;NL&quot; &quot;NL&quot; &quot;NL&quot; ...
##  $ sex            : chr  &quot;M&quot; &quot;M&quot; &quot;&quot; &quot;&quot; ...
##  $ hindfoot_length: int  32 31 NA NA NA NA NA NA NA NA ...
##  $ weight         : int  NA NA NA NA NA NA NA NA 218 NA ...
##  $ genus          : chr  &quot;Neotoma&quot; &quot;Neotoma&quot; &quot;Neotoma&quot; &quot;Neotoma&quot; ...
##  $ species        : chr  &quot;albigula&quot; &quot;albigula&quot; &quot;albigula&quot; &quot;albigula&quot; ...
##  $ taxa           : chr  &quot;Rodent&quot; &quot;Rodent&quot; &quot;Rodent&quot; &quot;Rodent&quot; ...
##  $ plot_type      : chr  &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; ...</code></pre>
<pre class="r"><code>## * class: data frame
## * how many rows: 34786,  how many columns: 13
## * the character data are characters if you have R Version 4.0.0 of later, factors for older versions
## * how many species: 48</code></pre>
</details>
</div>
<p><br></p>
</div>
<div id="indexing-and-subsetting-data-frames" class="section level2">
<h2>Indexing and subsetting data frames</h2>
<p>When we wanted to extract particular values from a vector, we used square brackets and put index values in them. Since data frames are made out of vectors, we can use the square brackets again, but with one change. Data frames are 2-dimensional, so we need to specify <strong>row</strong> and <strong>column</strong> indices. Row numbers come first, then a comma, then column numbers. Leaving the row number blank will return <strong>all</strong> rows, and the same thing applies to column numbers.</p>
<p>One thing to note is that the different ways you write out these indices can give you back either a data frame or a vector.</p>
<pre class="r"><code># first element in the first column of the data frame (as a vector)
surveys[1, 1]   </code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code># first element in the 6th column (as a vector)
surveys[1, 6]   </code></pre>
<pre><code>## [1] &quot;NL&quot;</code></pre>
<pre class="r"><code># first column of the data frame (as a vector)
surveys[, 1]    </code></pre>
<pre><code>##  [1]    1   72  224  266  349  363  435  506  588  661  748  845  990 1164 1261 1374 1453 1756 1818 1882 2133 2184 2406 2728 3000
## [26] 3002 4667 4859 5048 5180 5299 5485 5558 5583 5966 6020 6023 6036 6167 6479 6500 8022 8263 8387 8394 8407 8514 8543 8657 8675
##  [ reached getOption(&quot;max.print&quot;) -- omitted 34736 entries ]</code></pre>
<pre class="r"><code># first column of the data frame (as a data.frame)
surveys[1]      </code></pre>
<pre><code>##    record_id
## 1          1
## 2         72
## 3        224
## 4        266
## 5        349
## 6        363
## 7        435
## 8        506
## 9        588
## 10       661
## 11       748
## 12       845
## 13       990
## 14      1164
## 15      1261
## 16      1374
## 17      1453
## 18      1756
## 19      1818
## 20      1882
## 21      2133
## 22      2184
## 23      2406
## 24      2728
## 25      3000
## 26      3002
## 27      4667
## 28      4859
## 29      5048
## 30      5180
## 31      5299
## 32      5485
## 33      5558
## 34      5583
## 35      5966
## 36      6020
## 37      6023
## 38      6036
## 39      6167
## 40      6479
## 41      6500
## 42      8022
## 43      8263
## 44      8387
## 45      8394
## 46      8407
## 47      8514
## 48      8543
## 49      8657
## 50      8675
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 34736 rows ]</code></pre>
<pre class="r"><code># first three elements in the 7th column (as a vector)
surveys[1:3, 7] </code></pre>
<pre><code>## [1] &quot;M&quot; &quot;M&quot; &quot;&quot;</code></pre>
<pre class="r"><code># the 3rd row of the data frame (as a data.frame)
surveys[3, ]    </code></pre>
<pre><code>##   record_id month day year plot_id species_id sex hindfoot_length weight   genus  species   taxa plot_type
## 3       224     9  13 1977       2         NL                  NA     NA Neotoma albigula Rodent   Control</code></pre>
<pre class="r"><code># equivalent to head_surveys &lt;- head(surveys)
head_surveys &lt;- surveys[1:6, ] </code></pre>
<p><code>:</code> is a special function that creates numeric vectors of integers in increasing or decreasing order; try running <code>1:10</code> and <code>10:1</code> to check this out.</p>
<p>You can also exclude certain indices of a data frame using the “<code>-</code>” sign:</p>
<pre class="r"><code>surveys[, -1]          # The whole data frame, except the first column</code></pre>
<pre><code>##   month day year plot_id species_id sex hindfoot_length weight   genus  species   taxa plot_type
## 1     7  16 1977       2         NL   M              32     NA Neotoma albigula Rodent   Control
## 2     8  19 1977       2         NL   M              31     NA Neotoma albigula Rodent   Control
## 3     9  13 1977       2         NL                  NA     NA Neotoma albigula Rodent   Control
## 4    10  16 1977       2         NL                  NA     NA Neotoma albigula Rodent   Control
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 34782 rows ]</code></pre>
<pre class="r"><code>surveys[-c(7:34786), ] # Equivalent to head(surveys)</code></pre>
<pre><code>##   record_id month day year plot_id species_id sex hindfoot_length weight   genus  species   taxa plot_type
## 1         1     7  16 1977       2         NL   M              32     NA Neotoma albigula Rodent   Control
## 2        72     8  19 1977       2         NL   M              31     NA Neotoma albigula Rodent   Control
## 3       224     9  13 1977       2         NL                  NA     NA Neotoma albigula Rodent   Control
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 3 rows ]</code></pre>
<p>Data frames can be subset by calling indices (as shown previously), but also by calling their column names directly:</p>
<pre class="r"><code>surveys[&quot;species_id&quot;]       # Result is a data.frame
surveys[, &quot;species_id&quot;]     # Result is a vector
surveys[[&quot;species_id&quot;]]     # Result is a vector
surveys$species_id          # Result is a vector</code></pre>
<p>In general, when you’re working with data frames, you should make sure you know whether your code returns a data frame or a vector, as we see that different methods yield different results. Sometimes you get a data frame with one column, sometimes you get one vector.</p>
<p>You will probably end up using the <code>$</code> subsetting quite a bit. What’s nice about it is that it supports tab-completion! Type out your data frame name, then a dollar sign, then hit tab to get a list of the column names that you can scroll through.</p>
<div class="blue">
<h3 id="challenge-1">Challenge</h3>
<p>We are going to create a few new data frames using our subsetting skills.</p>
<ol style="list-style-type: decimal">
<li>Create a new data frame called <code>surveys_200</code> containing row 200 of the <code>surveys</code> dataset.</li>
<li>Create a new data frame called <code>surveys_last</code>, which extracts only the last row in of <code>surveys</code>.
<ul>
<li>Hint: Remember that <code>nrow()</code> gives you the number of rows in a data frame</li>
<li>Compare your <code>surveys_last</code> data frame with what you see as the last row using <code>tail()</code> with the <code>surveys</code> data frame to make sure it’s meeting expectations.</li>
</ul></li>
<li>Use <code>nrow()</code> to identify the row that is in the middle of <code>surveys</code>. Subset this row and store it in a new data frame called <code>surveys_middle</code>.</li>
<li>Reproduce the output of the <code>head()</code> function by using the <code>-</code> notation (e.g. removal) and the <code>nrow()</code> function, keeping just the first through 6th rows of the <code>surveys</code> dataset.</li>
</ol>
<details>
<p><summary>ANSWER</summary></p>
<pre class="r"><code>## 1.
surveys_200 &lt;- surveys[200, ]
## 2.
# Saving `n_rows` to improve readability and reduce duplication
n_rows &lt;- nrow(surveys)
surveys_last &lt;- surveys[n_rows, ]
## 3.
surveys_middle &lt;- surveys[n_rows / 2, ]
## 4.
surveys_head &lt;- surveys[-(7:n_rows), ]</code></pre>
</details>
</div>
<p><br></p>
</div>
<div id="base-r-vs.-tidyverse" class="section level1">
<h1>Base R vs. <code>tidyverse</code></h1>
<p>Almost every time you work in R, you will be using different “packages” to work with data. A package is a collection of functions used for some common purpose; there are packages for manipulating data, plotting, interfacing with other programs, and much much more.</p>
<p>All of the stuff we’ve covered so far has been using R’s “base” functionality, the built in functions and techniques that come with R by default. There is a new-ish set of packages called the <code>tidyverse</code> which does a lot of the same stuff as base R, plus much much more. The <code>tidyverse</code> is what we will focus on primarily from here on out, as it is a very powerful set of tools with a philosophy that focuses on being readable and intuitive when working with data. There are a few reasons we’ve taught you a bunch of base R stuff so far:</p>
<ol style="list-style-type: decimal">
<li>Base R can be quick and useful in a lot of ways</li>
<li>The <code>tidyverse</code> still works with the same building blocks as base R: vectors!</li>
<li>Some packages you need to use will only work with base R</li>
<li>You will someday use Google and find a perfect solution to your problem, using base R</li>
<li>You will probably have a collaborator at some point who uses base R</li>
<li>The <code>tidyverse</code> is constantly evolving, which can be good (new features!) and bad (really old <code>tidyverse</code> code may behave differently when you update)</li>
</ol>
<p>For example, using <code>[]</code> to subset data and using <code>read.csv()</code> are base R ways of doing things, but we’ll show you <code>tidyverse</code> ways of doing them as well.</p>
<p>In R, there are almost always several ways of accomplishing the same task. Showing you every single way of getting a job done seems like a waste of time, but we also don’t want you to feel lost when you come across some base R code, so that’s why there might be a bit of redundancy.</p>
<div id="loading-packages" class="section level2">
<h2>Loading Packages</h2>
<p>Almost every time you work in R, you will be using different “packages” to work with data. A package is a collection of functions used for some common purpose; there are packages for manipulating data, plotting, interfacing with other programs, and much much more.</p>
<p>For much of this course, we’ll be working with a series of packages collectively referred to as the <code>tidyverse</code>. They are packages designed to help you work with data, from cleaning and manipulation to plotting. They are all designed to work together nicely, and share a lot of similar principles. They are increasingly popular, have large user bases, and are generally very well-documented. You can install the core set of <code>tidyverse</code> packages with the <code>install.packages()</code> function:</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)</code></pre>
<p>It is usually recommended that you do <strong>NOT</strong> write this code into a script, or the package will be reinstalled every time you run the script. Instead, just run it once in your console, and it will be permanently installed so you can use it any time.</p>
<p>Once a package has been installed on your computer, you can load it in order to use it:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ──────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
## ✓ tibble  3.0.4     ✓ dplyr   1.0.2
## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ─────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Loading the <code>tidyverse</code> package actually loads a whole bunch of commonly used tidyverse packages at once, which is pretty convenient.</p>
<p>A common feature of <code>tidyverse</code> functions is that they use underscores in the name. For example, the <code>tidyverse</code> function for reading a CSV file is <code>read_csv()</code> instead of <code>read.csv()</code>. Let’s try it:</p>
<pre class="r"><code>t_surveys &lt;- read_csv(&quot;data/portal_data_joined.csv&quot;)</code></pre>
<pre><code>## 
## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────────────────────
## cols(
##   record_id = col_double(),
##   month = col_double(),
##   day = col_double(),
##   year = col_double(),
##   plot_id = col_double(),
##   species_id = col_character(),
##   sex = col_character(),
##   hindfoot_length = col_double(),
##   weight = col_double(),
##   genus = col_character(),
##   species = col_character(),
##   taxa = col_character(),
##   plot_type = col_character()
## )</code></pre>
<p>Now let’s take a look at how prints and check the class:</p>
<pre class="r"><code>t_surveys</code></pre>
<pre><code>## # A tibble: 34,786 x 13
##    record_id month   day  year plot_id species_id sex   hindfoot_length weight genus   species  taxa   plot_type
##        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;    
##  1         1     7    16  1977       2 NL         M                  32     NA Neotoma albigula Rodent Control  
##  2        72     8    19  1977       2 NL         M                  31     NA Neotoma albigula Rodent Control  
##  3       224     9    13  1977       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  4       266    10    16  1977       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  5       349    11    12  1977       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  6       363    11    12  1977       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  7       435    12    10  1977       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  8       506     1     8  1978       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
##  9       588     2    18  1978       2 NL         M                  NA    218 Neotoma albigula Rodent Control  
## 10       661     3    11  1978       2 NL         &lt;NA&gt;               NA     NA Neotoma albigula Rodent Control  
## # … with 34,776 more rows</code></pre>
<pre class="r"><code>class(t_surveys)</code></pre>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<p>Ooh, doesn’t that print out nicely? It only prints 10 rows by default, NAs are now colored red, and under the name of each column is the type of data! One important thing to notice is that the column types are only <code>double</code> and <code>character</code>, no factors here. By default, <code>read_csv()</code> keeps character data as <code>character</code> columns, which would be like setting <code>stringsAsFactors=FALSE</code> in <code>read.csv()</code>.</p>
<p>Also, <code>class()</code> returned multiple things! You’ll notice one of them is <code>data.frame</code>, but there are things like <code>tbl_df</code> as well. The <code>tidyverse</code> has a special type of <code>data.frame</code> called a “tibble”. Tibbles are the same as data frames, but they print nicely as we just saw, and they usually return a tibble when you’re using bracket subsetting. As always, just be sure to check whether you’re getting a tibble or a vector back.</p>
<pre class="r"><code>surveys[,1] # gives a vector back</code></pre>
<pre><code>##  [1]    1   72  224  266  349  363  435  506  588  661  748  845  990 1164 1261 1374 1453 1756 1818 1882 2133 2184 2406 2728 3000
## [26] 3002 4667 4859 5048 5180 5299 5485 5558 5583 5966 6020 6023 6036 6167 6479 6500 8022 8263 8387 8394 8407 8514 8543 8657 8675
##  [ reached getOption(&quot;max.print&quot;) -- omitted 34736 entries ]</code></pre>
<pre class="r"><code>t_surveys[,1] # gives a tibble back</code></pre>
<pre><code>## # A tibble: 34,786 x 1
##    record_id
##        &lt;dbl&gt;
##  1         1
##  2        72
##  3       224
##  4       266
##  5       349
##  6       363
##  7       435
##  8       506
##  9       588
## 10       661
## # … with 34,776 more rows</code></pre>
<p>This lesson is adapted from the Data Carpentry: R for Data Analysis and Visualization of Ecological Data <a href="https://datacarpentry.org/R-ecology-lesson/02-starting-with-data.html">Starting With Data materials</a>.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
